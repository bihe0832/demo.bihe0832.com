<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<meta name="format-detection" content="telephone=no" />    
		<meta http-equiv="Pragma" content="no-cache">
		<meta http-equiv="Cache-Control" content="no-cache, must-revalidate">
		<meta http-equiv="Expires" content="0">
		<link rel="Shortcut Icon" href="https://cdn.bihe0832.com/images/zixie_32.ico" />
		<title>çš®å¡ä¸˜å°æ¸¸æˆä¹‹ç»å…¸æ‰«é›·</title>
		<meta name="author" CONTENT="å­å‹°(bihe0832), code@bihe0832.com" />
		<meta name="keywords" content="å­å‹°,bihe0832,å·¥å…·å’©" />
		<meta name="description" content="çš®å¡ä¸˜å­¦æ•°å­¦ä¹‹é¸¡å…”åŒç¬¼åŒå‡è®¾æ¼”ç¤º" />
		<meta property="og:title" content="çš®å¡ä¸˜å­¦æ•°å­¦ä¹‹é¸¡å…”åŒç¬¼åŒå‡è®¾æ¼”ç¤º" />
		<meta property="og:locale" content="en_US" />
		<meta name="google-site-verification" content="3wzNgbjvFNHkH-8QpougMZ0s9Y4GEjG49kEb49QQqpw" />
		<meta property="og:description" content="" />
		<link rel="canonical" href="https://blog.bihe0832.com/" />
		<meta property="og:url" content="https://blog.bihe0832.com/" />
		<meta property="og:site_name" content="å·¥å…·å’©" />
		<meta property="og:type" content="article" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<meta http-equiv="Pragma" content="no-cache">
		<meta http-equiv="Cache-Control" content="no-cache, must-revalidate">
		<meta http-equiv="Expires" content="0">
	
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        
        .game-container {
            display: inline-block;
            background-color: #c0c0c0;
            padding: 20px;
            border: 6px solid;
            border-color: #808080 #ffffff #ffffff #808080;
            margin-bottom: 30px;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 10px 20px;
            background-color: #c0c0c0;
            border: 6px solid;
            border-color: #ffffff #808080 #808080 #ffffff;
        }
        
        .counter {
            display: flex;
            background-color: black;
            color: red;
            font-family: monospace;
            font-size: 48px;
            padding: 5px 10px;
            border: 2px solid #808080;
        }
        
        .face-button {
            width: 52px;
            height: 52px;
            font-size: 40px;
            cursor: pointer;
            background-color: #c0c0c0;
            border: 6px solid;
            border-color: #ffffff #808080 #808080 #ffffff;
        }
        
        .face-button:active {
            border-color: #808080 #ffffff #ffffff #808080;
        }
        
        .game-board {
            display: grid;
            grid-template-columns: repeat(var(--cols), 48px);
            grid-template-rows: repeat(var(--rows), 48px);
            gap: 2px;
            background-color: #808080;
            border: 6px solid;
            border-color: #808080 #ffffff #ffffff #808080;
        }
        
        .cell {
            width: 48px;
            height: 48px;
            background-color: #c0c0c0;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 32px;
            cursor: pointer;
            border: 4px solid;
            border-color: #ffffff #808080 #808080 #ffffff;
            user-select: none;
        }
        
        .cell.revealed {
            background-color: #c0c0c0;
            border: 2px solid #808080;
        }
        
        .cell.mine {
            background-color: red;
        }
        
        .cell.flagged {
            background-color: #c0c0c0;
        }
        
        .number-1 { color: blue; }
        .number-2 { color: green; }
        .number-3 { color: red; }
        .number-4 { color: darkblue; }
        .number-5 { color: brown; }
        .number-6 { color: teal; }
        .number-7 { color: black; }
        .number-8 { color: gray; }
        
        .difficulty-selector {
            margin: 20px 0;
        }
        
        button {
            padding: 10px 20px;
            margin: 0 10px;
            cursor: pointer;
            font-size: 16px;
        }
        
        .instructions {
            max-width: 800px;
            margin: 0 auto;
            background-color: #e0e0e0;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            text-align: left;
        }
        
        .instructions h2 {
            color: #333;
            margin-top: 0;
            border-bottom: 2px solid #808080;
            padding-bottom: 10px;
            text-align: center;
        }
        
        .instructions h3 {
            color: #444;
            margin-top: 20px;
        }
        
        .instructions ul {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 10px;
            font-size: 16px;
            line-height: 1.5;
        }
        
        .instructions-columns {
            display: flex;
            gap: 30px;
        }
        
        .instructions-column {
            flex: 1;
        }
    </style>
</head>
<body>
    <h1>ç»å…¸æ‰«é›·æ¸¸æˆ</h1>
    
    <div class="difficulty-selector">
        <button onclick="startGame(9, 9, 10)">åˆçº§ (9Ã—9, 10é›·)</button>
        <button onclick="startGame(16, 16, 40)">ä¸­çº§ (16Ã—16, 40é›·)</button>
        <button onclick="startGame(30, 16, 99)">é«˜çº§ (30Ã—16, 99é›·)</button>
    </div>
    
    <div class="game-container">
        <div class="game-header">
            <div class="counter" id="mine-counter">010</div>
            <button class="face-button" id="face-button" onclick="resetGame()">ğŸ˜Š</button>
            <div class="counter" id="timer">000</div>
        </div>
        <div class="game-board" id="game-board"></div>
    </div>
    
    <div class="instructions">
        <h2>æ‰«é›·æ¸¸æˆç©æ³•è¯´æ˜</h2>
        
        <div class="instructions-columns">
            <div class="instructions-column">
                <h3>æ¸¸æˆç›®æ ‡</h3>
                <p>åœ¨ä¸è§¦é›·çš„æƒ…å†µä¸‹ï¼Œæ­ç¤ºæ‰€æœ‰éåœ°é›·æ ¼å­ã€‚</p>
                
                <h3>åŸºæœ¬æ“ä½œ</h3>
                <ul>
                    <li><strong>å·¦é”®ç‚¹å‡»æ ¼å­</strong>ï¼šæ­ç¤ºè¯¥æ ¼å­</li>
                    <li><strong>å³é”®ç‚¹å‡»æ ¼å­</strong>ï¼šæ ‡è®°/å–æ¶ˆæ ‡è®°ä¸ºåœ°é›·</li>
                    <li><strong>æ•°å­—</strong>ï¼šè¡¨ç¤ºå‘¨å›´8ä¸ªæ ¼å­ä¸­çš„åœ°é›·æ•°é‡</li>
                    <li><strong>ç¬¬ä¸€æ¬¡ç‚¹å‡»</strong>ï¼šæ°¸è¿œä¸ä¼šç‚¹åˆ°åœ°é›·</li>
                </ul>
                
                <h3>æ¸¸æˆçŠ¶æ€</h3>
                <ul>
                    <li>ğŸ˜Šï¼šæ¸¸æˆè¿›è¡Œä¸­</li>
                    <li>ğŸ˜®ï¼šé¼ æ ‡æŒ‰ä¸‹æ—¶</li>
                    <li>ğŸ˜µï¼šè¸©åˆ°åœ°é›·ï¼Œæ¸¸æˆå¤±è´¥</li>
                    <li>ğŸ˜ï¼šæ¸¸æˆèƒœåˆ©</li>
                </ul>
            </div>
            
            <div class="instructions-column">
                <h3>æ¸¸æˆç­–ç•¥</h3>
                <ul>
                    <li>ä»æ•°å­—1å¼€å§‹ï¼Œé€æ­¥æ¨ç†å‘¨å›´åœ°é›·ä½ç½®</li>
                    <li>å½“ç¡®å®šæŸæ ¼æ˜¯åœ°é›·æ—¶ï¼Œå³é”®æ ‡è®°å®ƒ</li>
                    <li>å½“æŸæ ¼å‘¨å›´çš„åœ°é›·éƒ½å·²æ ‡è®°ï¼Œå¯ä»¥åŒæ—¶ç‚¹å‡»å·¦å³é”®å¿«é€Ÿæ­ç¤ºå‘¨å›´æ ¼å­</li>
                    <li>ä¸ç¡®å®šæ—¶ï¼Œå¯ä»¥å…ˆæ­ç¤ºå…¶ä»–åŒºåŸŸ</li>
                </ul>
                
                <h3>éš¾åº¦çº§åˆ«</h3>
                <ul>
                    <li><strong>åˆçº§</strong>ï¼š9Ã—9 æ ¼å­ï¼Œ10ä¸ªåœ°é›·</li>
                    <li><strong>ä¸­çº§</strong>ï¼š16Ã—16 æ ¼å­ï¼Œ40ä¸ªåœ°é›·</li>
                    <li><strong>é«˜çº§</strong>ï¼š30Ã—16 æ ¼å­ï¼Œ99ä¸ªåœ°é›·</li>
                </ul>
                
                <h3>æç¤º</h3>
                <ul>
                    <li>ç‚¹å‡»ç¬‘è„¸æŒ‰é’®å¯ä»¥é‡æ–°å¼€å§‹æ¸¸æˆ</li>
                    <li>å·¦ä¸Šè§’æ˜¾ç¤ºå‰©ä½™åœ°é›·æ•°</li>
                    <li>å³ä¸Šè§’æ˜¾ç¤ºæ¸¸æˆæ—¶é—´</li>
                </ul>
            </div>
        </div>
    </div>
    
    <script>
        // æ¸¸æˆçŠ¶æ€
        const gameState = {
            rows: 9,
            cols: 9,
            mines: 10,
            board: [],
            revealed: [],
            flagged: [],
            gameOver: false,
            gameWon: false,
            firstClick: true,
            timer: 0,
            timerInterval: null,
            minesLeft: 10
        };
        
        // DOMå…ƒç´ 
        const gameBoard = document.getElementById('game-board');
        const mineCounter = document.getElementById('mine-counter');
        const timerDisplay = document.getElementById('timer');
        const faceButton = document.getElementById('face-button');
        
        // åˆå§‹åŒ–æ¸¸æˆ
        function startGame(rows, cols, mines) {
            // æ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
            if (gameState.timerInterval) {
                clearInterval(gameState.timerInterval);
            }
            
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            gameState.rows = rows;
            gameState.cols = cols;
            gameState.mines = mines;
            gameState.board = [];
            gameState.revealed = Array(rows * cols).fill(false);
            gameState.flagged = Array(rows * cols).fill(false);
            gameState.gameOver = false;
            gameState.gameWon = false;
            gameState.firstClick = true;
            gameState.timer = 0;
            gameState.minesLeft = mines;
            
            // æ›´æ–°UI
            updateMineCounter();
            updateTimer();
            faceButton.textContent = 'ğŸ˜Š';
            
            // è®¾ç½®æ¸¸æˆæ¿æ ·å¼
            gameBoard.style.setProperty('--rows', rows);
            gameBoard.style.setProperty('--cols', cols);
            
            // åˆ›å»ºæ¸¸æˆæ¿
            gameBoard.innerHTML = '';
            for (let i = 0; i < rows * cols; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.dataset.index = i;
                
                // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
                cell.addEventListener('click', () => handleCellClick(i));
                cell.addEventListener('contextmenu', (e) => {
                    e.preventDefault();
                    handleRightClick(i);
                });
                
                // é¼ æ ‡æŒ‰ä¸‹å’ŒæŠ¬èµ·äº‹ä»¶
                cell.addEventListener('mousedown', () => {
                    if (!gameState.gameOver && !gameState.gameWon && !gameState.flagged[i]) {
                        faceButton.textContent = 'ğŸ˜®';
                    }
                });
                
                cell.addEventListener('mouseup', () => {
                    if (!gameState.gameOver && !gameState.gameWon) {
                        faceButton.textContent = 'ğŸ˜Š';
                    }
                });
                
                cell.addEventListener('mouseleave', () => {
                    if (!gameState.gameOver && !gameState.gameWon) {
                        faceButton.textContent = 'ğŸ˜Š';
                    }
                });
                
                gameBoard.appendChild(cell);
            }
        }
        
        // é‡ç½®æ¸¸æˆï¼ˆä¿æŒç›¸åŒéš¾åº¦ï¼‰
        function resetGame() {
            startGame(gameState.rows, gameState.cols, gameState.mines);
        }
        
        // ç”Ÿæˆæ¸¸æˆæ¿ï¼ˆåœ¨ç¬¬ä¸€æ¬¡ç‚¹å‡»åï¼‰
        function generateBoard(firstClickIndex) {
            // åˆå§‹åŒ–ç©ºç™½æ¿
            gameState.board = Array(gameState.rows * gameState.cols).fill(0);
            
            // æ”¾ç½®åœ°é›·
            let minesPlaced = 0;
            while (minesPlaced < gameState.mines) {
                const randomIndex = Math.floor(Math.random() * gameState.rows * gameState.cols);
                
                // ç¡®ä¿ä¸åœ¨ç¬¬ä¸€æ¬¡ç‚¹å‡»çš„ä½ç½®åŠå…¶å‘¨å›´æ”¾ç½®åœ°é›·
                if (randomIndex !== firstClickIndex && 
                    !isAdjacent(firstClickIndex, randomIndex) && 
                    gameState.board[randomIndex] !== -1) {
                    gameState.board[randomIndex] = -1; // -1 è¡¨ç¤ºåœ°é›·
                    minesPlaced++;
                    
                    // å¢åŠ ç›¸é‚»æ ¼å­çš„æ•°å­—
                    const [row, col] = indexToPosition(randomIndex);
                    for (let r = Math.max(0, row - 1); r <= Math.min(gameState.rows - 1, row + 1); r++) {
                        for (let c = Math.max(0, col - 1); c <= Math.min(gameState.cols - 1, col + 1); c++) {
                            const index = positionToIndex(r, c);
                            if (gameState.board[index] !== -1) {
                                gameState.board[index]++;
                            }
                        }
                    }
                }
            }
            
            // å¼€å§‹è®¡æ—¶
            startTimer();
        }
        
        // æ£€æŸ¥ä¸¤ä¸ªæ ¼å­æ˜¯å¦ç›¸é‚»
        function isAdjacent(index1, index2) {
            const [r1, c1] = indexToPosition(index1);
            const [r2, c2] = indexToPosition(index2);
            return Math.abs(r1 - r2) <= 1 && Math.abs(c1 - c2) <= 1;
        }
        
        // å¤„ç†æ ¼å­ç‚¹å‡»
        function handleCellClick(index) {
            if (gameState.gameOver || gameState.gameWon || gameState.flagged[index]) {
                return;
            }
            
            // ç¬¬ä¸€æ¬¡ç‚¹å‡»ç”Ÿæˆæ¸¸æˆæ¿
            if (gameState.firstClick) {
                generateBoard(index);
                gameState.firstClick = false;
            }
            
            // å¦‚æœç‚¹åˆ°åœ°é›·ï¼Œæ¸¸æˆç»“æŸ
            if (gameState.board[index] === -1) {
                revealAllMines();
                gameState.gameOver = true;
                faceButton.textContent = 'ğŸ˜µ';
                return;
            }
            
            // æ­ç¤ºæ ¼å­
            revealCell(index);
            
            // æ£€æŸ¥æ˜¯å¦èƒœåˆ©
            checkWin();
        }
        
        // å¤„ç†å³é”®ç‚¹å‡»ï¼ˆæ’æ——ï¼‰
        function handleRightClick(index) {
            if (gameState.gameOver || gameState.gameWon || gameState.revealed[index]) {
                return;
            }
            
            // åˆ‡æ¢æ’æ——çŠ¶æ€
            gameState.flagged[index] = !gameState.flagged[index];
            
            // æ›´æ–°UI
            const cell = gameBoard.children[index];
            if (gameState.flagged[index]) {
                cell.textContent = 'ğŸš©';
                gameState.minesLeft--;
            } else {
                cell.textContent = '';
                gameState.minesLeft++;
            }
            
            updateMineCounter();
            
            // æ£€æŸ¥æ˜¯å¦èƒœåˆ©
            checkWin();
        }
        
        // æ­ç¤ºæ ¼å­
        function revealCell(index) {
            if (gameState.revealed[index] || gameState.flagged[index]) {
                return;
            }
            
            gameState.revealed[index] = true;
            const cell = gameBoard.children[index];
            cell.classList.add('revealed');
            
            // æ˜¾ç¤ºæ ¼å­å†…å®¹
            if (gameState.board[index] === -1) {
                cell.textContent = 'ğŸ’£';
                cell.classList.add('mine');
            } else if (gameState.board[index] > 0) {
                cell.textContent = gameState.board[index];
                cell.classList.add(`number-${gameState.board[index]}`);
            } else {
                // å¦‚æœæ˜¯ç©ºç™½æ ¼å­ï¼Œé€’å½’æ­ç¤ºå‘¨å›´çš„æ ¼å­
                const [row, col] = indexToPosition(index);
                for (let r = Math.max(0, row - 1); r <= Math.min(gameState.rows - 1, row + 1); r++) {
                    for (let c = Math.max(0, col - 1); c <= Math.min(gameState.cols - 1, col + 1); c++) {
                        const neighborIndex = positionToIndex(r, c);
                        if (neighborIndex !== index && !gameState.revealed[neighborIndex]) {
                            revealCell(neighborIndex);
                        }
                    }
                }
            }
        }
        
        // æ­ç¤ºæ‰€æœ‰åœ°é›·ï¼ˆæ¸¸æˆç»“æŸæ—¶ï¼‰
        function revealAllMines() {
            for (let i = 0; i < gameState.rows * gameState.cols; i++) {
                if (gameState.board[i] === -1) {
                    const cell = gameBoard.children[i];
                    cell.textContent = 'ğŸ’£';
                    cell.classList.add('mine');
                }
            }
        }
        
        // æ£€æŸ¥æ˜¯å¦èƒœåˆ©
        function checkWin() {
            // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰éåœ°é›·æ ¼å­éƒ½å·²æ­ç¤º
            let allNonMinesRevealed = true;
            for (let i = 0; i < gameState.rows * gameState.cols; i++) {
                if (gameState.board[i] !== -1 && !gameState.revealed[i]) {
                    allNonMinesRevealed = false;
                    break;
                }
            }
            
            // æˆ–è€…æ‰€æœ‰åœ°é›·éƒ½å·²æ­£ç¡®æ ‡è®°
            let allMinesFlagged = true;
            for (let i = 0; i < gameState.rows * gameState.cols; i++) {
                if (gameState.board[i] === -1 && !gameState.flagged[i]) {
                    allMinesFlagged = false;
                    break;
                }
            }
            
            if (allNonMinesRevealed || allMinesFlagged) {
                gameState.gameWon = true;
                faceButton.textContent = 'ğŸ˜';
                clearInterval(gameState.timerInterval);
                
                // æ ‡è®°æ‰€æœ‰åœ°é›·
                for (let i = 0; i < gameState.rows * gameState.cols; i++) {
                    if (gameState.board[i] === -1) {
                        const cell = gameBoard.children[i];
                        cell.textContent = 'ğŸš©';
                        gameState.flagged[i] = true;
                    }
                }
                gameState.minesLeft = 0;
                updateMineCounter();
            }
        }
        
        // å¼€å§‹è®¡æ—¶å™¨
        function startTimer() {
            gameState.timer = 0;
            updateTimer();
            clearInterval(gameState.timerInterval);
            gameState.timerInterval = setInterval(() => {
                gameState.timer++;
                updateTimer();
                
                // è®¡æ—¶å™¨æœ€å¤§å€¼999
                if (gameState.timer >= 999) {
                    clearInterval(gameState.timerInterval);
                }
            }, 1000);
        }
        
        // æ›´æ–°è®¡æ—¶å™¨æ˜¾ç¤º
        function updateTimer() {
            timerDisplay.textContent = gameState.timer.toString().padStart(3, '0');
        }
        
        // æ›´æ–°åœ°é›·è®¡æ•°å™¨
        function updateMineCounter() {
            mineCounter.textContent = Math.min(999, Math.max(0, gameState.minesLeft)).toString().padStart(3, '0');
        }
        
        // è¾…åŠ©å‡½æ•°ï¼šç´¢å¼•è½¬è¡Œåˆ—
        function indexToPosition(index) {
            const row = Math.floor(index / gameState.cols);
            const col = index % gameState.cols;
            return [row, col];
        }
        
        // è¾…åŠ©å‡½æ•°ï¼šè¡Œåˆ—è½¬ç´¢å¼•
        function positionToIndex(row, col) {
            return row * gameState.cols + col;
        }
        
        // åˆå§‹åŒ–æ¸¸æˆï¼ˆåˆçº§éš¾åº¦ï¼‰
        startGame(9, 9, 10);
    </script>
</body>
</html>
